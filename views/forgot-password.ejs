<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>forgot-password</title>
    <style>

    </style>
</head>
<body>
    <h2>forgot password</h2>
    <form action="" method="post">
        <label for="email">Email</label>
        <input type="email" name="email" id="email">
        <input type="submit" value="submiit">
    </form>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>login-signup form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
      crossorigin="anonymous"
    />
    <style>
     *{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    /* overflow: hidden; */
    font-family: BrandonTextWeb-Bold,sans-serif;
}

body,html{
    height: 100%;
    width: 100%;
   
  

}
body{
    background-color: #051622ed;
}
.container{
    height: 100%;
    width: 100%;
    font-family: sans-serif;
    background: rgb(200, 195, 195);
    color: #000000;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;

   
    
}

.navbar-margin{
    margin-left:25px;
}
.container.blur{
    filter: blur(5px);
}

.card{
    width:540px;
    height: 279px;
    box-shadow: 0 0 19px 0px rgba(0,0,0,0.3);
    perspective: 1000px;
    border-radius: 12px;
    margin-top: 65px;
    --bs-card-bg:#287672;
    color:#DEB992;
    margin-top: 140px;
}

.inner-box{
    position: relative;
    width: 100%;
    height: 100%;
   
    transform-style: preserve-3d;
    transition: transform 1s;

}
.card-front, .card-back{
    position: absolute;
    width: 100%;
    height: 100%;
    background-position: center;
    background-size: cover;
    background-color: #80808005;
    box-sizing: border-box;
    backface-visibility: hidden;
    padding: 50px;
    border-radius: 12px;
}

.card-back{
    transform: rotateY(180deg);
}

.card h2{
    font-weight: normal;
    font-size: 24px;
    text-align: center;
    margin-bottom: 20px;
}

.input-box{
    width: 100%;
    background: transparent;
    border: none;
    border-bottom: 2px solid #DEB992;
    margin: 6px;
    height: 32px;
    border-radius: 7px;
    padding: 0 10px;
    box-sizing: border-box;
    outline: none;
    text-align: center;
    color: #051622;
}

::placeholder{
    color: #00000090;
    font-size: 20px;
    
}

button{
    
    background: transparent;
    border: 1px solid white;
    margin: 35px 0 7px 6px;
    height: 32px;
    font-size: 12px;
    border-radius: 20px;
    padding: 0px 10px;
    box-sizing: border-box;
    outline:none;
    color: #000000;
    cursor: pointer;
}

.submit-btn{
    position: relative;
    width: 100%;
    border: 2px solid #DEB992;
    color: #DEB992;
    font-size: 18.7px;
    font-weight: bold;
}
.submit-btn::after{
    content: '\27a4';
    color: #051622;
    line-height: 32px;
    font-size: 17px;
    height: 32px;
    width: 32px;
    border-radius: 50%;
    background: #DEB992;
    position: absolute;
    right: -1px;
    top: -1px;

}

span{
    font-size: 13px;
    margin-left: 10px;
}

.card .btn{
    margin-top: 70px;
    margin-top: 20px;
    margin-left: 60px;
    
    outline: none;
    
    padding: 0px 7px;

}





.card a{
    color: #051622;
    text-decoration: none;
    display: block;
    text-align: center;
    font-size: 15px;
    margin-top: 8px;
    border-bottom: 2px solid;
    width: 52%;
    margin-left: 60px;

}



/* CSS code for the modal */
.modal {
    position: absolute;
    top: 24%;
    left: 0;
    right: 0;
    bottom: 0;
    margin-left: 25%;
    height: fit-content;
    width: 50%;
    border-radius: 20px;
    overflow: visible;
    
    
  }
  
  .modal-content {
    background-color: #051622;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    text-align: center;
   height: 100%;
   color: #DEB992;
  }
  
  .modal-content h2 {
    margin-top: 0;
  }
  
 
  
  .modal.show {
    display: flex;
  }
  
  #close-valid-modal-button{
    margin-top: 10px;
    height: 35px;
    width: 67px;
    background: #1BA098;
    text-align: center;
    margin-left: 45%;
    font-weight: bold;
    font-size: 14px;
    color: #051622;
    border: none;
  }

    button#close-modal-button {
        width: 20%;
        margin-left: 40%;
        background-color: #1BA098;
        border: none;
        font-size: 16px;
  }
  button#close-modal-button:hover{
    background-color: #DEB992;

  }
  /* ________________________________________________________________________ */


.main-div,.container{
    height: 100%;
    width: 100%;
    background-color: #00000000;
}

.container-fluid{
    margin-left: 55px;
}

.navbar-toggler-icon{
    background-image:url('../134216_menu_lines_hamburger_icon.svg')
}

/* ------------------Navbar CSS--------------------- */

.bg-custom{
    background-color: #051622;
 }
 
.navbar-brand{
    font-weight: bold;
    color: #1BA098;
    margin:0px;
    padding: 0px 5px 6px;
    transition: 0.3s color;
    
   
}
.navbar-brand:hover{
    color:#DEB992 ;
    border-bottom: 2px solid #DEB992;
    
}


.navbar-collapse .navbar-nav .nav-item>a{
    color: #1BA098 !important ;
    border-bottom: 2px solid #051622;

    
} 

.navbar-collapse .nav-item:hover>a{
    color:#DEB992 !important;
    border-color: #DEB992;

}

.navbar-margin{
    margin-left:25px;
}


.navbar-nav{
    margin-left: 50px
}

li.nav-item {
    margin-right: 30px;
}

.dropdown-menu[data-bs-popper] {
   left: unset;
   margin-top: 10px
}


.user-dropdown-menu{

   
    left: 25% !important;
    background-color: #051622 !important;
    
}
.user-dropdown-menu a{
    color: #DEB992;
}
.user-dropdown-menu li:hover .dropdown-item{
    background-color: #0c324edb !important;
    color: #DEB992 !important;
    
}

.files-dropdown-menu{

   
    left: 25% !important;
    background-color: #051622 !important;
    
}
.files-dropdown-menu a{
    color: #DEB992;
}
.files-dropdown-menu li:hover .dropdown-item{
    background-color: #0c324edb !important;
    color: #deb99265 !important;
    
}
    </style>
  </head>
  <body>
    <%- include('./partials/beforeLoginHeader.ejs') %>

    <div class="row">
      <div class="container">
        <div class="card">
          <div class="inner-box" id="card">
            <div class="card-front">
              <h2>Reset Password</h2>

              <form id="login-form" >
                <input
                id="resetPassEmailInput"
                  type="email"
                  class="input-box"
                  placeholder="Email Id"
                  name="email"
                  required
                />

                <button type="button" class="submit-btn" id="summit-btn">submit</button>
                <!-- <input type="checkbox" name="remember" /><span>Remember Me</span> -->
              </form>
              
            </div>
          </div>


          <div class="inner-box" id="card2">
            <div class="card-front">
              <h2></h2>

              <form id="login-form2" action="" >
                <input
                  type="number"
                  class="input-box"
                  placeholder="enter unique code"
                  name="token"
                  required
                />

                <button type="button" class="submit-btn">submit</button>
                <!-- <input type="checkbox" name="remember" /><span>Remember Me</span> -->
              </form>
              
            </div>
          </div>
          

          <div class="inner-box" id="card4">
            <div class="card-front">
              <h2></h2>

              <form id="login-form4" action="" >
                <input
                  type="text"
                  class="input-box"
                  placeholder="enter new passwaord"
                  name="passwd"
                  required
                />
                <input
                  type="text"
                  class="input-box"
                  placeholder="Re-enter new passwaord"
                  name="re-passwd"
                  required
                />

                <button type="button" class="submit-btn">reset-password</button>
                <!-- <input type="checkbox" name="remember" /><span>Remember Me</span> -->
              </form>
              
            </div>
          </div>



          <div class="inner-box" id="card3">
            <div class="card-front">
              <form action="/sign-up">
              <h2>password has been Reset successfully. Click on ok to go to login page!</h2>
                <button type="submit" class="submit-btn">Ok</button>
                <!-- <input type="checkbox" name="remember" /><span>Remember Me</span> -->
              </form>
              
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
      crossorigin="anonymous"
    ></script>
    <script>
      const card2 = document.getElementById('card2');
      card2.style.display='none';

      const card2msg = document.querySelector('#card2 h2')
      const card3 = document.getElementById('card3');
      card3.style.display='none';

      const card = document.getElementById('card');

      const card4 = document.getElementById('card4');
      card4.style.display='none';
      
      console.log("This is hollllla");
       

      const resetBtn = document.getElementById('summit-btn');


      resetBtn.addEventListener('click',()=>{

        const resetEmail = document.getElementById(
          'resetPassEmailInput'
        );
      console.log(resetEmail.value);

      const formData1 = {
          email:resetEmail.value
        }

       fetch("/forgot-password", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
            }, 
    body: JSON.stringify(formData1)
        }).then((res)=>{
          return res.json();
        }).then((res)=>{
          if(res.success){
            card2msg.innerHTML=res.msg;
            card.style.display='none';
            card2.style.display='block';
          }else{
            card2msg.innerHTML=res.msg;
            card.style.display='none';
            card2.style.display='block';
          }
          

        })
      })

      const okBtn = document.querySelector('#login-form2 button');
      okBtn.addEventListener('click',()=>{
        const gettoken = document.querySelector('#login-form2 input[name="token"]');

        const formData2 = {
          token:gettoken.value
        }

        fetch("/forgot-password/token", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
            }, 
    body: JSON.stringify(formData2)
        }).then((res)=>{
          return res.json();
        }).then((res)=>{
          if(res.success){
            card2.style.display='none';
            card4.style.display='block';
          }

        })
      })
    </script>
    <!-- <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->
  </body>
</html>
